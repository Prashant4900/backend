# Key Vault

Key Vault is an open-source project that provides a secure way to store and manage secret keys and logs. The application allows users to authenticate, add secret keys, and log their usage securely.

## Overview

This project is a RESTful API built using [Dart Frog](https://dartfrog.vgv.dev), designed to handle user authentication, secret key management, and logging. The API supports operations such as user login, adding and retrieving secret keys, and managing logs, making it suitable for applications requiring secure data handling.

## Features

- **User Authentication**: Securely login users and manage tokens.
- **Secret Key Management**: Add and retrieve secret keys securely.
- **Logging**: Log user activity and manage logs.
- **Encryption**: Securely encrypt and decrypt sensitive data.

## Technologies Used

- Dart Frog
- Supabase (for database and authentication)
- Dart programming language
- AES Encryption

## Getting Started

### Prerequisites

- Dart SDK (>=2.12.0)
- Dart Frog (installed via `dart pub global activate dart_frog`)
- An HTTP client library (e.g., `http` package)
- dotenv package for environment variables

### Installation

1. Clone the repository:

   ```bash
   git clone https://github.com/Prashant4900/key-vault-backend.git
   cd key-vault-backend
   ```

2.	Install the dependencies:

    ```bash
    dart pub get
    ```

3.	Create a .env file in the root directory and add your environment variables:

    ```bash
    BASE_URL=<your_base_url>
    SUPABASE_ANON=<your_supabase_anon_key>
    ```

## Running the Project

To run the server, execute the following command:

```bash
dart_frog dev
```

The API will be available at http://localhost:8080.

### API Endpoints

| Method | Endpoint            | Description                                  |
|--------|---------------------|----------------------------------------------|
| POST   | `/api/auth/login`   | Authenticates a user and returns a token.   |
| POST   | `/api/secret/add`   | Adds a new secret key.                       |
| GET    | `/api/secret/get`   | Retrieves a secret key by its associated key.|
| POST   | `/api/logs/add`     | Adds a new log entry.                        |
| GET    | `/api/logs/get`     | Retrieves logs.                              |
| GET    | `/api/logs/`        | Returns a message indicating the logs API.  |
| GET    | `/api/secret/`      | Returns a message indicating the secret API. |

## Database Schema

To replicate the database schema in your own Supabase project, you can use the following SQL commands to create the necessary tables.

### Table: secret_keys
```sql
CREATE TABLE
  public.secret_keys (
    id bigint generated by default as identity not null,
    created_at timestamp with time zone not null default now(),
    name character varying not null,
    secret character varying not null,
    key character varying not null,
    constraint secret_keys_pkey primary key (id),
    constraint secret_keys_key_key unique (key),
    constraint secret_keys_secret_key_key unique (secret)
  ) TABLESPACE pg_default;
```

### Table: secret_logs
```sql
CREATE TABLE
  public.secret_logs (
    id bigint generated by default as identity not null,
    created_at timestamp with time zone not null default now(),
    user_id character varying not null,
    key character varying null,
    constraint secret_logs_pkey primary key (id),
    constraint secret_logs_key_fkey foreign key (key) references secret_keys (key) on delete set null
  ) TABLESPACE pg_default;
```

## Encryption Support

Key Vault uses AES encryption to securely handle sensitive data. The following methods are provided:

-   Encryption: Securely encrypts plaintext using a provided key.
-	Decryption: Decrypts the previously encrypted text using the same key.

Make sure to use strong keys for encryption and decryption processes.


## Example Request

### User Login

```bash
curl -X POST http://localhost:8080/api/auth/login \
-H "Content-Type: application/json" \
-d '{"email": "user@example.com", "password": "yourpassword"}'
```

## Demo

Check out the demo video to see Key Vault in action: [Watch Demo](https://www.youtube.com/watch?v=wqO9nzTnYFo)

## Contributing

Contributions are welcome! Please feel free to submit a pull request or open an issue for any improvements or bugs.

1.	Fork the repository.
2.	Create your feature branch (git checkout -b feature/YourFeature).
3.	Commit your changes (git commit -m 'Add some feature').
4.	Push to the branch (git push origin feature/YourFeature).
5.	Open a pull request.
